/* __brand.css | trazzafoodsproject.klaario.com */

/* --- klaario colours --- */
:root {
  --klaario-plum: #7D435C;
  --klaario-plum-hover-light: #9B5775; /* Light hover */
  --klaario-plum-hover-dark:  #6F3C52; /* Dark hover */

  /* Font vars */
  --font-sans: 'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji', sans-serif;
  --font-serif: 'Noto Serif', Georgia, 'Times New Roman', Times, serif;
}

/* --- Typography (source of truth) --- */

/* 1) Base: body uses Noto Sans */
:where(html, body, #root) {
  font-family: var(--font-sans) !important;
}

/* 2) Inherit Noto Sans to everything EXCEPT headings */
:where(html, body, #root) :where(*, *::before, *::after):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6) {
  font-family: inherit !important;
}

/* 3) Headings = Noto Serif, weight = Medium (500) — high-specificity, wins vs utilities */
h1, h2, h3, h4, h5, h6,
.prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6,
h1[class], h2[class], h3[class], h4[class], h5[class], h6[class] {
  font-family: var(--font-serif) !important;
  font-weight: 500 !important;   /* Medium */
  line-height: 1.15;
}

/* Utility-friendly aliases (Tailwind etc.) */
.font-sans, [class*="font-sans"] { font-family: var(--font-sans) !important; }
.font-serif, [class*="font-serif"] { font-family: var(--font-serif) !important; }

/* Neutralise any explicit IBM Plex references if they slip through inline */
[class*="plex"], [class*="Plex"], [style*="IBM Plex"], [style*="IBM+Plex"] {
  font-family: var(--font-sans) !important;
}

/* --- Links in klaario Plum --- */
a, button, .btn, .link { color: var(--klaario-plum); }
a:hover, button:hover, .btn:hover, .link:hover { color: var(--klaario-plum-hover-light); }

@media (prefers-color-scheme: dark) {
  a:hover, button:hover, .btn:hover, .link:hover { color: var(--klaario-plum-hover-dark); }
}
/* ===== Make system/override colours win over utility classes ===== */

/* When following system AND device is dark */
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) body,
  html:not([data-theme]) #root,
  html:not([data-theme]) main,
  html:not([data-theme]) .app,
  html:not([data-theme]) .container {
    background-color: var(--bg) !important;
    color: var(--fg) !important;
  }
  html:not([data-theme]) a { color: var(--link) !important; }
  html:not([data-theme]) a:hover { color: var(--link-hover) !important; }
}

/* When the user explicitly chooses Dark */
html[data-theme="dark"] body,
html[data-theme="dark"] #root,
html[data-theme="dark"] main,
html[data-theme="dark"] .app,
html[data-theme="dark"] .container {
  background-color: var(--bg) !important;
  color: var(--fg) !important;
}
html[data-theme="dark"] a { color: var(--link) !important; }
html[data-theme="dark"] a:hover { color: var(--link-hover) !important; }

/* (Optional) soften Light too, so it beats aggressive utilities */
html[data-theme="light"] body,
html[data-theme="light"] #root,
html[data-theme="light"] main,
html[data-theme="light"] .app,
html[data-theme="light"] .container {
  background-color: var(--bg) !important;
  color: var(--fg) !important;
}

/* Help UA widgets (forms/scrollbars) choose appropriate palette */
:root { color-scheme: light dark; }
/* ===== Dark-mode utility neutralizers (only when following system AND OS is dark) ===== */

/* 1) Apply dark variables to the main surfaces so they win over utility classes */
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) body,
  html:not([data-theme]) #root,
  html:not([data-theme]) main,
  html:not([data-theme]) header,
  html:not([data-theme]) footer,
  html:not([data-theme]) section,
  html:not([data-theme]) .container,
  html:not([data-theme]) .app {
    background-color: var(--bg) !important;
    color: var(--fg) !important;
  }

  /* 2) Most common Tailwind “light” background utilities to neutralize */
  html:not([data-theme]) .bg-white,
  html:not([data-theme]) .bg-gray-50,
  html:not([data-theme]) .bg-slate-50,
  html:not([data-theme]) .bg-neutral-50 {
    background-color: var(--bg) !important;
  }

  /* 3) Most common “dark text” utilities that clash in dark mode */
  html:not([data-theme]) .text-gray-800,
  html:not([data-theme]) .text-slate-800,
  html:not([data-theme]) .text-neutral-900 {
    color: var(--fg) !important;
  }

  /* 4) Links remain klaario Plum in dark */
  html:not([data-theme]) a { color: var(--link) !important; }
  html:not([data-theme]) a:hover { color: var(--link-hover) !important; }
}

/* ===== Manual overrides still work exactly as before ===== */
html[data-theme="dark"] body,
html[data-theme="dark"] #root,
html[data-theme="dark"] main,
html[data-theme="dark"] header,
html[data-theme="dark"] footer,
html[data-theme="dark"] section,
html[data-theme="dark"] .container,
html[data-theme="dark"] .app {
  background-color: var(--bg) !important;
  color: var(--fg) !important;
}
html[data-theme="dark"] a { color: var(--link) !important; }
html[data-theme="dark"] a:hover { color: var(--link-hover) !important; }

/* (Optional) Manual Light gets the same priority so it beats utilities */
html[data-theme="light"] body,
html[data-theme="light"] #root,
html[data-theme="light"] main,
html[data-theme="light"] header,
html[data-theme="light"] footer,
html[data-theme="light"] section,
html[data-theme="light"] .container,
html[data-theme="light"] .app {
  background-color: var(--bg) !important;
  color: var(--fg) !important;
}

/* Help browsers choose UI palette (forms/scrollbars) */
:root { color-scheme: light dark; }

/* Dark surfaces for card-like containers */
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) .rounded-lg,
  html:not([data-theme]) .shadow-lg,
  html:not([data-theme]) .card {
    background-color: var(--surface) !important;
    color: var(--fg) !important;
    border-color: var(--border) !important;
  }
}
/* Manual dark mirrors the same */
html[data-theme="dark"] .rounded-lg,
html[data-theme="dark"] .shadow-lg,
html[data-theme="dark"] .card {
  background-color: var(--surface) !important;
  color: var(--fg) !important;
  border-color: var(--border) !important;
}
/* Ensure headings stay readable on dark */
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) h1, html:not([data-theme]) h2, html:not([data-theme]) h3,
  html:not([data-theme]) h4, html:not([data-theme]) h5, html:not([data-theme]) h6 {
    color: var(--fg) !important;
  }
}
html[data-theme="dark"] h1, html[data-theme="dark"] h2, html[data-theme="dark"] h3,
html[data-theme="dark"] h4, html[data-theme="dark"] h5, html[data-theme="dark"] h6 {
  color: var(--fg) !important;
}
